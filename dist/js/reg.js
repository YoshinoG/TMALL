$(function(){var e=flag2=flag3=flag4=flag5=!1,s=$("header p"),t="",n="",l=0;$("#user-pact>span").click(function(){$(location).attr("href","index.html")}),$("#agree").click(function(){$("#user-pact").css("display","none")}),$("#on").click(function(){$(this).find("ul:hidden").length?$(this).find("ul").css("display","block"):$(this).find("ul").css("display","none")}),$("#tell").change(function(){var t=$("#tell").val();/^[1][3,4,5,7,8][0-9]{9}$/.test(t)?(e=!0,$(this).next().html("&#xe600;").addClass("green")):(e=!1,$(this).next().html("请正确输入").addClass("red"))}),$(".inner").mousedown(function(t){var e,s=$(".inner"),n=s.offset(),l=$(".outer>span"),a=$(".filter-box"),c=$(".outer").width()-s.width();$(document).mousemove(function(t){(e=t.pageX-n.left)<0?e=0:c<e&&(e=c),a.css("width",e),s.css("left",e)}),$(document).mouseup(function(t){$(document).off("mousemove"),$(document).off("mouseup"),(e=t.pageX-n.left)<c?(e=0,l.html("滑动解锁")):c<=e&&(e=c,$(".outer").addClass("act"),l.html("验证通过！"),a.html(""),s.html("&#xe600;"),flag2=!0),a.css("width",e),s.css("left",e)})}),$("#next1").click(function(){e&&flag2&&($("#content1").next().css("display","block").siblings(".content").css("display","none"),s.eq(1).addClass("now").siblings().removeClass("now"))}),$("#username").change(function(){n=$("#username").val(),/[A-Za-z_0-9]{3,20}$/.test(n)?(flag3=!0,$(this).next().html("&#xe600;").addClass("green")):(flag3=!1,$(this).next().html("请正确输入").addClass("red"))}),$("#pwd").change(function(){t=$("#pwd").val(),/[A-Za-z_0-9]{6,20}$/.test(t)?(flag4=!0,$(this).next().html("&#xe600;").attr("class","green")):(flag4=!1,$(this).next().html("请正确输入").attr("class","red")),$("#pwd-re").val()===t?(flag5=!0,$("#pwd-re").next().html("&#xe600;").attr("class","green")):(flag6=!1,$("#pwd-re").next().html("两次密码不一致").attr("class","red"))}),$("#pwd-re").change(function(){$("#pwd-re").val()===t?(flag5=!0,$(this).next().html("&#xe600;").attr("class","green")):(flag6=!1,$(this).next().html("两次密码不一致").attr("class","red"))}),$("#next2").click(function(){flag3&&flag4&&flag5&&$.ajax({type:"post",url:"http://h6.duchengjiu.top/shop/api_user.php",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{status:"register",username:n,password:t},success:function(t){l=t.data[0],console.log(t),0==t.code?($("#content2").next().css("display","block").siblings(".content").css("display","none"),s.eq(2).addClass("now").siblings().removeClass("now")):2001==t.code&&$("#username").next().html("用户名已存在").attr("class","red")}})}),$("#next3").click(function(){$("#content3").next().css("display","block").siblings(".content").css("display","none"),s.eq(3).addClass("now").siblings().removeClass("now")}),$("#next4").click(function(){setCookie("user_id",l),$(location).attr("href","index.html")})});